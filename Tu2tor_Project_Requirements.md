# Tu2tor - Peer-to-Peer Tutor Finder System
## 项目需求文档 (Project Requirements Document)

**Last Updated:** 2024-10-27
**Project:** CIT2C20 Full Stack Web Development
**Case Study:** Case 3 - Peer-to-Peer Learning/Tutor Finder

---

## 📋 目录 (Table of Contents)

1. [项目概述](#项目概述)
2. [问题定义](#问题定义)
3. [项目目标](#项目目标)
4. [核心功能](#核心功能)
5. [线框图规划](#线框图规划)
6. [数据模型](#数据模型)
7. [技术栈](#技术栈)
8. [开发计划](#开发计划)

---

## 📌 项目概述

### App Name: Tu2tor
**设计理念:** "Tu2tor" 中的 "2" 巧妙地代表了 "two-way" (双向) 和 "to" 的谐音,完美体现了点对点(peer-to-peer)学习的核心理念 - 每个学生既可以是导师(Tutor),也可以是学员(Tutee)。

### 核心价值
Tu2tor 旨在连接需要学术帮助的学生与愿意分享知识的同龄导师,创建一个便捷、可信、高效的校园点对点学习平台。平台采用虚拟Credit积分系统,鼓励学生互助学习,帮助他人即可获得Credits用于寻求帮助。

### 技术栈
**MERN Stack:**
- MongoDB - 数据库
- Express.js - 后端框架
- React.js - 前端框架
- Node.js - 运行环境

---

## 🎯 问题定义

### 当前学生面临的4个核心问题:

#### 1. 信息发现困难 🔍
学生不知道谁擅长什么科目,缺乏统一的查找平台,导致浪费时间到处打听,可能找到不合适的导师或错过最佳学习时机。

#### 2. 缺乏信任机制 ⭐
学生无法判断潜在导师的真实水平和教学质量,没有评价系统作为参考,担心浪费时间在不负责任的导师上,影响学习体验和效率。

#### 3. 时间协调复杂 📅
学生之间难以协调合适的辅导时间,需要来回沟通多次,时间冲突频繁且效率低下,许多学习机会因此错过。

#### 4. 缺乏激励机制 🎯
优秀学生缺乏帮助他人的动力,平台导师供应不足且质量参差不齐,没有认可和奖励机制,难以长期维持互助学习文化。

---

## 🎯 项目目标

### 主要目标
连接需要帮助的学生与愿意分享知识的同龄导师,创建一个便捷、可信、高效的点对点学习平台。

### 解决方案
1. **简化导师查找流程** - 智能匹配算法,多维度筛选
2. **提供便捷的预约系统** - 在线时间表管理,一键预约
3. **建立可信的评价体系** - 真实学生评价,透明评分系统
4. **激励社区参与** - 积分奖励,成就徽章,排行榜

### 独特价值主张

#### 1. 专为学生设计
- 专注于**校园内**的点对点学习
- 同龄人之间的学习更轻松、更平等
- 校园环境更安全、更可信

#### 2. 智能匹配系统
- 基于**科目、课程、可用时间**的智能匹配
- 个性化推荐最合适的导师
- 标签化数据管理(Tag-based Matching)

#### 3. 完整的信任机制
- **学生身份验证** - 只有在校学生可加入
- **评价系统** - 透明的导师评分和评论
- **徽章系统** - 认证的优秀导师标识
- **辅导记录** - 完整的历史记录

#### 4. Credit与游戏化激励
- **Credit系统** - 帮助他人获得Credits,寻求帮助消耗Credits
- **积分系统** - 辅导获得声誉积分
- **徽章奖励** - 解锁不同等级的成就
- **排行榜** - 展示最活跃的导师
- **证书** - 可下载的辅导证明

#### 5. 无缝预约体验
- **日历集成** - 可视化时间管理
- **自动提醒** - 邮件/通知提醒
- **一键预约** - 简化预约流程
- **即时确认** - 实时预约状态

---

## 🚀 核心功能

### 功能优先级分类

**MVP阶段 (Part 2 - 必须实现):**
- 功能1: 用户注册与登录
- 功能2: 个人资料管理
- 功能3: 导师搜索与筛选
- 功能4: 导师详情页
- 功能5: 预约辅导 (基础版)

**完整版本 (Part 3 - 必须实现):**
- 功能6: 预约管理
- 功能7: 评价系统

**高级功能 (Part 3 - 选择实现):**
- 功能8: 积分与徽章系统 (推荐)

---

### 功能1: 用户注册与登录

| 项目 | 内容 |
|------|------|
| **功能名称** | User Registration & Login |
| **描述** | 允许学生创建账户并登录系统,确保只有在校学生可以访问平台 |
| **用户操作** | • 使用学校邮箱注册<br>• 输入用户名、密码、专业、年级<br>• 邮箱验证<br>• 登录系统<br>• 记住登录状态 |
| **预期结果** | • 注册成功后收到验证邮件<br>• 登录后跳转到主页<br>• 显示欢迎消息<br>• 未验证邮箱会提示 |
| **实现计划** | • Part 2: 前端表单验证<br>• Part 3: JWT认证,数据库连接<br>• 未来: 第三方登录 |

---

### 功能2: 个人资料管理

| 项目 | 内容 |
|------|------|
| **功能名称** | Profile Management |
| **描述** | 允许用户创建和编辑个人资料,展示技能、专长和个人信息 |
| **用户操作** | • 上传头像<br>• 填写个人简介<br>• 添加擅长科目(标签)<br>• 设置角色(导师/学生/两者)<br>• 添加已完成课程<br>• 编辑联系方式 |
| **预期结果** | • 显示完整个人资料页面<br>• 技能标签云展示<br>• 显示导师统计数据<br>• 保存确认消息 |
| **实现计划** | • Part 2: 资料编辑表单<br>• Part 3: 保存到数据库,图片上传<br>• 未来: 简历/成绩单上传 |

---

### 功能3: 导师搜索与筛选

| 项目 | 内容 |
|------|------|
| **功能名称** | Tutor Search & Filter |
| **描述** | 帮助学生快速找到符合条件的导师,支持多维度搜索和筛选 |
| **用户操作** | • 搜索框输入科目/课程<br>• 筛选器:<br>  - 按科目分类<br>  - 按课程代码<br>  - 按评分排序<br>  - 按可用时间<br>• 查看搜索结果<br>• 点击导师卡片查看详情 |
| **预期结果** | • 实时显示搜索结果<br>• 导师卡片显示:<br>  - 头像和姓名<br>  - 擅长科目标签<br>  - 平均评分(星级)<br>  - 辅导次数<br>• 无结果提示 |
| **实现计划** | • Part 2: 搜索UI和筛选器组件<br>• Part 3: 后端API,实时搜索<br>• 未来: 智能推荐算法 |

---

### 功能4: 导师详情页

| 项目 | 内容 |
|------|------|
| **功能名称** | Tutor Profile Detail |
| **描述** | 展示导师的完整信息,帮助学生全面了解导师背景和能力 |
| **用户操作** | • 查看导师完整资料:<br>  - 个人简介<br>  - 擅长科目列表<br>  - 已完成课程<br>  - 平均评分和分布<br>• 阅读学生评价<br>• 查看可用时间日历<br>• 点击"预约辅导"按钮 |
| **预期结果** | • 显示完整信息页面<br>• 评分星级和数字显示<br>• 评价列表(评分、评论、日期)<br>• 可用时间日历展示<br>• "预约辅导"按钮突出 |
| **实现计划** | • Part 2: 详情页面布局<br>• Part 3: 数据库获取数据和评价<br>• 未来: 视频介绍功能 |

---

### 功能5: 预约辅导

| 项目 | 内容 |
|------|------|
| **功能名称** | Book Tutoring Session |
| **描述** | 允许学生预约导师的辅导时间,简化时间协调流程 |
| **用户操作** | • 选择可用时间段<br>• 填写预约信息:<br>  - 选择科目/课程<br>  - 选择日期和时间<br>  - 描述需要帮助的内容<br>  - 选择地点(线上/线下)<br>• 提交预约请求<br>• 等待导师确认 |
| **预期结果** | • 日历可用时间高亮<br>• 填写预约表单<br>• 提交确认消息<br>• 跳转到"我的预约"<br>• 发送邮件/通知给导师 |
| **实现计划** | • Part 2: 预约表单和日历选择器<br>• Part 3: 保存到数据库,通知系统<br>• 未来: Google Calendar集成,Zoom链接 |

---

### 功能6: 预约管理

| 项目 | 内容 |
|------|------|
| **功能名称** | Booking Management |
| **描述** | 允许学生和导师查看、管理、取消或重新安排预约 |
| **用户操作** | **学生端:**<br>• 查看我的预约列表<br>• 取消预约<br>• 查看预约详情<br><br>**导师端:**<br>• 查看预约请求<br>• 接受或拒绝预约<br>• 设置可用时间<br>• 管理时间表 |
| **预期结果** | • 预约列表卡片/表格展示<br>• 每个预约显示:<br>  - 对方姓名和头像<br>  - 科目和时间<br>  - 状态标签<br>  - 操作按钮<br>• 不同状态不同颜色<br>• 一键接受/拒绝 |
| **实现计划** | • Part 2: 预约管理界面<br>• Part 3: 状态更新和通知<br>• 未来: 预约提醒(24h/1h前) |

---

### 功能7: 评价系统

| 项目 | 内容 |
|------|------|
| **功能名称** | Rating & Review System |
| **描述** | 允许学生对完成的辅导进行评分和评论,建立信任机制 |
| **用户操作** | • 辅导完成后收到评价提醒<br>• 给导师打分(1-5星)<br>• 撰写文字评论<br>• 提交评价<br>• 查看收到的评价<br>• 查看给出的评价 |
| **预期结果** | • 辅导完成后弹出评价表单<br>• 星级评分组件<br>• 文本输入框<br>• 提交后感谢消息<br>• 评价显示在导师资料页<br>• 平均评分自动更新 |
| **实现计划** | • Part 2: 评分组件和评论表单<br>• Part 3: 保存评价,计算平均分<br>• 未来: 举报功能,防刷分机制 |

---

### 功能8: Credit积分与徽章系统

| 项目 | 内容 |
|------|------|
| **功能名称** | Credit & Badges System |
| **描述** | 通过虚拟Credit和游戏化激励导师参与,增加平台活跃度和用户粘性 |
| **用户操作** | **Credit系统:**<br>• 注册赠送100 Credits<br>• 完成辅导获得+20 Credits<br>• 预约辅导消耗-10 Credits<br>• 取消预约扣除-5 Credits<br>• 获得5星评价额外+5 Credits<br><br>**徽章系统:**<br>• 达到里程碑解锁徽章:<br>  - "新手导师" (完成1次)<br>  - "优秀导师" (评分4.5+)<br>  - "资深导师" (完成10次)<br>  - "学霸" (辅导5门科目)<br>• 查看声誉积分排行榜<br>• 展示徽章 |
| **预期结果** | • 个人资料显示Credit余额和徽章<br>• 完成辅导后Credit到账提示<br>• Credit不足时提示"去帮助他人获得Credits"<br>• 解锁徽章动画和祝贺<br>• 排行榜显示前20名<br>• 徽章图标展示在导师卡片 |
| **实现计划** | • Part 2: Credit余额显示和徽章UI<br>• Part 3: Credit交易逻辑和徽章解锁<br>• 未来: Credit礼物赠送,月度导师之星 |

---

## 🎨 线框图规划

### 页面1: 导师搜索页 (Tutor Search Page)

**核心功能组件:**

1. **搜索栏 (Search Bar)**
   - 关键词搜索框
   - 实时搜索建议
   - 搜索按钮

2. **筛选器 (Filters Sidebar)**
   - 科目分类下拉菜单
   - 课程代码输入
   - 评分范围选择器
   - 可用时间选择器
   - "清除筛选"按钮

3. **搜索结果列表 (Results Grid)**
   - 导师卡片(Grid布局)
   - 每个卡片包含:
     - 头像
     - 姓名
     - 擅长科目标签
     - 平均评分(星级)
     - 辅导次数
     - "查看详情"按钮

4. **排序选项 (Sort Options)**
   - 按评分排序
   - 按辅导次数排序
   - 按响应速度排序

**设计重点:**
- 清晰的视觉层次
- 移动端友好
- 快速加载
- 无结果时友好提示

---

### 页面2: 导师详情页 (Tutor Detail Page)

**核心功能组件:**

1. **导师头部信息 (Tutor Header)**
   - 大头像
   - 姓名和专业
   - 平均评分(大字号)
   - 总辅导次数
   - 响应率和响应时间
   - 认证徽章

2. **个人简介 (Bio Section)**
   - 自我介绍文本
   - 擅长科目标签云
   - 已完成课程列表

3. **可用时间 (Availability Calendar)**
   - 周视图日历
   - 可用时间段高亮
   - 时区显示

4. **评价列表 (Reviews Section)**
   - 评分分布图
   - 评价卡片列表:
     - 评价者头像和姓名
     - 星级评分
     - 评价内容
     - 评价标签
     - 评价日期
   - "查看更多"按钮

5. **预约按钮 (Booking CTA)**
   - 突出的"预约辅导"按钮
   - 固定在底部(移动端)

**设计重点:**
- 建立信任感
- 信息完整但不冗余
- 突出预约行动

---

### 页面3: 用户仪表板 (User Dashboard)

**核心功能组件:**

1. **顶部导航 (Top Navigation)**
   - 用户头像和姓名
   - 积分显示
   - 通知图标
   - 角色切换按钮(学生/导师)

2. **统计卡片 (Stats Cards)**
   - 待确认预约数量
   - 即将到来的预约
   - 总辅导次数(导师)
   - 获得的积分

3. **预约管理区 (Bookings Section)**
   - Tab切换:
     - 作为学生的预约
     - 作为导师的预约
   - 预约列表(卡片形式):
     - 对方头像和姓名
     - 科目
     - 时间和地点
     - 状态标签
     - 操作按钮(接受/拒绝/取消/评价)

4. **快捷操作 (Quick Actions)**
   - "查找导师"按钮
   - "设置可用时间"按钮
   - "查看我的评价"按钮

5. **徽章展示 (Badges Display)**
   - 已解锁徽章图标
   - 解锁进度条
   - "查看所有徽章"链接

6. **侧边栏菜单 (Sidebar Menu)**
   - 仪表板
   - 我的预约
   - 我的资料
   - 设置
   - 退出登录

**设计重点:**
- 一目了然的信息总览
- 清晰的待办事项
- 快速访问常用功能

---

## 💾 数据模型

### 模型关系概览

```
User (用户) ──────┐
  ↓ 1:1           │ 1:M
TutorProfile      CreditTransaction
  ↓ M:M           (Credit交易)
Subject (科目)
  ↓ 1:M
Booking (预约)
  ↓ 1:1
Review (评价)
```

---

### 模型1: User (用户)

**表名:** `users`

**描述:** 存储所有用户的基本账户信息和身份验证数据

**主要属性:**

| 属性名 | 类型 | 示例值 | 描述 |
|--------|------|--------|------|
| userId | ObjectId | "507f1f77bcf86cd799439011" | 用户唯一标识符 |
| email | String | "student@tp.edu.sg" | 学校邮箱(唯一) |
| password | String | "$2b$10$..." | 加密密码(bcrypt) |
| username | String | "张三" | 用户显示名称 |
| studentId | String | "1234567D" | 学号 |
| major | String | "计算机科学" | 专业 |
| yearOfStudy | Number | 3 | 年级(1-4) |
| avatar | String | "/uploads/user.jpg" | 头像路径 |
| role | Array[String] | ["student", "tutor"] | 用户角色 |
| isEmailVerified | Boolean | true | 邮箱验证状态 |
| credits | Number | 100 | 用户Credits余额 |
| points | Number | 280 | 用户声誉积分 |
| badges | Array[String] | ["newbie", "expert"] | 已解锁徽章 |
| createdAt | Date | "2024-09-15T08:30:00Z" | 创建时间 |
| isActive | Boolean | true | 账户状态 |

**索引:**
- `email`: 唯一索引
- `studentId`: 唯一索引
- `role`: 索引

---

### 模型2: TutorProfile (导师档案)

**表名:** `tutor_profiles`

**描述:** 存储导师的详细信息、技能、可用时间和统计数据

**主要属性:**

| 属性名 | 类型 | 示例值 | 描述 |
|--------|------|--------|------|
| profileId | ObjectId | "507f1f77bcf86cd799439012" | 档案唯一标识符 |
| userId | ObjectId | "507f1f77bcf86cd799439011" | 关联用户ID(外键) |
| bio | String | "擅长编程和数据结构..." | 个人简介(最多500字) |
| subjects | Array[Object] | [{"subjectId": "sub001", "name": "Python", "level": "expert"}] | 擅长科目列表 |
| completedCourses | Array[Object] | [{"code": "CS101", "name": "编程基础", "grade": "A"}] | 已完成课程 |
| availableSlots | Array[Object] | [{"day": "Monday", "startTime": "14:00", "endTime": "16:00"}] | 可用时间段 |
| preferredLocation | Array[String] | ["图书馆", "线上"] | 偏好地点 |
| languages | Array[String] | ["中文", "英文"] | 可用语言 |
| totalSessions | Number | 45 | 总辅导次数 |
| totalHours | Number | 68.5 | 总辅导小时数 |
| averageRating | Number | 4.9 | 平均评分(1-5) |
| totalReviews | Number | 28 | 评价总数 |
| responseRate | Number | 98 | 响应率(%) |
| responseTime | Number | 120 | 平均响应时间(分钟) |
| isVerified | Boolean | true | 是否验证 |
| status | String | "active" | 状态: active/inactive/suspended |

**复杂属性结构:**

```json
// subjects 结构
{
  "subjectId": "sub001",
  "subjectName": "Python编程",
  "proficiencyLevel": "expert",  // beginner/intermediate/advanced/expert
  "yearsOfExperience": 2
}

// availableSlots 结构
{
  "day": "Monday",  // Monday-Sunday
  "startTime": "14:00",
  "endTime": "16:00",
  "isRecurring": true
}
```

**索引:**
- `userId`: 唯一索引
- `subjects.subjectName`: 文本索引
- `averageRating`: 索引
- `status`: 索引

---

### 模型3: Booking (预约)

**表名:** `bookings`

**描述:** 存储学生和导师之间的辅导预约信息

**主要属性:**

| 属性名 | 类型 | 示例值 | 描述 |
|--------|------|--------|------|
| bookingId | ObjectId | "507f1f77bcf86cd799439013" | 预约唯一标识符 |
| studentId | ObjectId | "507f1f77bcf86cd799439011" | 学生ID(外键) |
| tutorId | ObjectId | "507f1f77bcf86cd799439014" | 导师ID(外键) |
| subjectId | String | "sub001" | 科目ID |
| subjectName | String | "Python编程" | 科目名称 |
| courseCode | String | "CS101" | 课程代码(可选) |
| sessionDate | Date | "2024-10-28T14:00:00Z" | 辅导日期和开始时间 |
| duration | Number | 2 | 辅导时长(小时) |
| endTime | Date | "2024-10-28T16:00:00Z" | 结束时间 |
| location | String | "图书馆3楼" | 辅导地点 |
| locationType | String | "offline" | 地点类型: online/offline |
| meetingLink | String | "https://zoom.us/j/123" | 在线会议链接 |
| description | String | "需要帮助理解类和对象..." | 需求描述 |
| status | String | "confirmed" | 状态: pending/confirmed/completed/cancelled/rejected |
| cancellationReason | String | "时间冲突" | 取消原因 |
| cancelledBy | String | "student" | 取消者: student/tutor/system |
| isRated | Boolean | false | 是否已评价 |
| reminderSent | Boolean | true | 是否已发送提醒 |
| createdAt | Date | "2024-10-20T10:00:00Z" | 创建时间 |
| confirmedAt | Date | "2024-10-21T09:30:00Z" | 确认时间 |
| completedAt | Date | null | 完成时间 |

**状态流转:**
```
pending(待确认) → confirmed(已确认) → completed(已完成)
                            ↓
                     cancelled(已取消)
                     rejected(已拒绝)
```

**索引:**
- `studentId`: 索引
- `tutorId`: 索引
- `status`: 索引
- `sessionDate`: 索引
- 复合索引: `(tutorId, sessionDate)`

**业务规则:**
- 防止重复预约: 同一导师同一时间段不能重叠
- 提前预约: 至少提前2小时
- 取消政策: 至少提前2小时取消
- 自动完成: 结束时间后24小时自动标记为completed

---

### 模型4: Review (评价)

**表名:** `reviews`

**描述:** 存储学生对导师的评价和反馈

**主要属性:**

| 属性名 | 类型 | 示例值 | 描述 |
|--------|------|--------|------|
| reviewId | ObjectId | "507f1f77bcf86cd799439015" | 评价唯一标识符 |
| bookingId | ObjectId | "507f1f77bcf86cd799439013" | 关联预约ID(外键) |
| tutorId | ObjectId | "507f1f77bcf86cd799439014" | 被评价导师ID(外键) |
| studentId | ObjectId | "507f1f77bcf86cd799439011" | 评价者ID(外键) |
| rating | Number | 5 | 评分(1-5星) |
| comment | String | "讲解非常清楚!强烈推荐!" | 评价内容(最多500字) |
| tags | Array[String] | ["耐心", "讲解清晰", "准备充分"] | 评价标签 |
| isAnonymous | Boolean | false | 是否匿名 |
| isVerified | Boolean | true | 是否验证(确认预约完成) |
| helpfulCount | Number | 12 | 有用数量 |
| reportCount | Number | 0 | 被举报次数 |
| response | Object | {"content": "感谢反馈!", "createdAt": "..."} | 导师回复 |
| status | String | "published" | 状态: published/hidden/deleted |
| createdAt | Date | "2024-10-15T20:00:00Z" | 创建时间 |

**索引:**
- `tutorId`: 索引
- `bookingId`: 唯一索引
- `rating`: 索引
- 复合索引: `(tutorId, createdAt)`

**业务规则:**
- 评价资格: 只有预约状态为completed才能评价
- 一次评价: 每个预约只能评价一次
- 时间限制: 预约完成后7天内必须评价
- 防刷分: 同一学生对同一导师评价不能过于频繁

---

### 模型5: Subject (科目)

**表名:** `subjects`

**描述:** 存储所有可辅导的科目/课程信息

**主要属性:**

| 属性名 | 类型 | 示例值 | 描述 |
|--------|------|--------|------|
| subjectId | String | "sub001" | 科目唯一标识符 |
| name | String | "Python编程" | 科目名称 |
| code | String | "CS101" | 课程代码(可选) |
| category | String | "编程" | 科目分类 |
| description | String | "学习Python基础语法..." | 科目描述 |
| level | String | "beginner" | 难度: beginner/intermediate/advanced |
| department | String | "计算机科学" | 所属院系 |
| icon | String | "🐍" | 科目图标 |
| tags | Array[String] | ["编程", "Python", "初级"] | 搜索标签 |
| tutorCount | Number | 15 | 教该科目的导师数量 |
| bookingCount | Number | 234 | 总预约次数 |
| averageRating | Number | 4.7 | 平均评分 |
| isActive | Boolean | true | 是否激活 |

**科目分类:**
- 编程 (Python, Java, JavaScript, C++)
- 数学 (微积分, 线性代数, 统计学, 离散数学)
- 理科 (物理, 化学, 生物)
- 语言 (英语, 中文, 日语)

**索引:**
- `subjectId`: 主键索引
- `name`: 文本索引
- `category`: 索引
- `code`: 索引

---

### 模型6: CreditTransaction (Credit交易)

**表名:** `credit_transactions`

**描述:** 记录所有Credit交易历史

**主要属性:**

| 属性名 | 类型 | 示例值 | 描述 |
|--------|------|--------|------|
| transactionId | ObjectId | "507f..." | 交易唯一标识符 |
| userId | ObjectId | "507f..." | 用户ID(外键) |
| amount | Number | +20 | 交易金额(正数为收入,负数为支出) |
| type | String | "booking_reward" | 交易类型 |
| relatedId | ObjectId | "507f..." | 关联的预约/评价ID(可选) |
| balance | Number | 120 | 交易后余额 |
| description | String | "完成辅导奖励" | 交易描述 |
| createdAt | Date | "2024-10-27T..." | 交易时间 |

**交易类型:**
- `initial_bonus`: 注册赠送 (+100)
- `booking_cost`: 预约辅导 (-10)
- `booking_reward`: 完成辅导 (+20)
- `review_bonus`: 5星评价奖励 (+5)
- `cancellation_penalty`: 取消预约扣除 (-5)

**索引:**
- `userId`: 索引
- `createdAt`: 索引
- 复合索引: `(userId, createdAt)` 查询用户交易历史

---

## 🛠 技术栈

### 前端 (Frontend)
- **React.js** - UI框架
- **React Router** - 路由管理
- **Axios** - HTTP请求
- **CSS Modules / Styled Components** - 样式管理
- **React Hook Form** - 表单处理

### 后端 (Backend)
- **Node.js** - 运行环境
- **Express.js** - Web框架
- **MongoDB** - 数据库
- **Mongoose** - ODM (Object Data Modeling)
- **JWT** - 身份验证
- **bcrypt** - 密码加密

### 开发工具
- **Git** - 版本控制
- **VS Code** - 代码编辑器
- **Postman** - API测试
- **MongoDB Compass** - 数据库管理

---

## 📅 开发计划

### Part 1: 项目提案 (20%) - Week 5
**截止日期:** 2024-11-17

**交付内容:**
- [x] 问题定义和客户需求 (4%)
- [x] 项目目标和价值主张 (3%)
- [x] 建议功能列表 (3%) - 8个功能
- [ ] 线框图 (5%) - 3个主要页面
- [x] 数据模型 (5%) - 5个模型
- [ ] PPT演示文稿 (15-20 slides)

### Part 2: MVP原型 (45%) - Week 12
**截止日期:** 2026-01-05

**核心交付:**
- 用户注册与登录(前端)
- 个人资料管理(前端)
- **智能导师搜索与筛选** ⭐
  - 多维度筛选器(学科、2-3个时间块)
  - 固定加权排序算法
  - 推荐理由Chips(规则生成)
  - 偏好滑块(时间↔评分)
- 导师详情页(前端)
- 预约辅导基础版(前端)
- Credit系统UI(余额显示,前端模拟)
- 评价系统(匿名+72h可撤回,前端模拟)
- 响应式设计
- Mock数据(10-20名导师 + 评价 + Credit交易)

**亮点功能:**
- 动态权重对比开关(可视化"注意力"效果)
- 即时调整偏好,列表实时重排

### Part 3: 完整应用 (35%) - Week 16
**截止日期:** 2026-02-02

**核心实现:**
- 后端API开发
- MongoDB数据库集成
- JWT身份验证
- 所有8个功能完整实现
- **智能匹配系统持久化** ⭐
  - 用户偏好存储
  - 负反馈记录(不相关/时间不合/教学风格不合)
  - 动态权重优化(基于反馈的softmax调整)
- **Credit交易系统** ⭐
  - Credit余额管理
  - 预约扣除/辅导奖励
  - 交易历史记录
- 评价系统(真实数据库操作)
- 徽章系统

**高级功能(5%):**
- AI评价摘要与标签提取(OpenAI API)
- 仅用于提升可读性,不参与排序

---

## 📝 附加说明

### 智能匹配推荐系统 (Intelligent Matching & Recommendation)

#### 🎯 设计理念

**核心目标:** 构建一个"会看场景、可解释"的导师匹配功能，在确保稳定性和可复现性的前提下，通过动态权重实现个性化推荐。

**设计原则:**
- ✅ **无训练门槛** - 不做机器学习训练，零后端也能跑
- ✅ **完全可解释** - 每个推荐理由都可追溯
- ✅ **即时响应** - 前端实时计算，无需等待
- ✅ **Vibecoding友好** - 用规则+动态权重，精力放在产品逻辑

---

#### 📊 匹配算法设计

**方案1: 固定加权排序 (Part 2 基础版)**

学生输入需求:
- 学科
- 2-3个可上课时间

系统采用固定权重计算匹配度:
- **时间重叠度** (40%) - 学生可用时间与导师时间的重叠程度
- **评分质量** (30%) - 导师的平均评分
- **响应速度** (20%) - 导师的平均响应时间
- **同校偏好** (10%) - 是否为同校导师

注: 所有辅导统一消耗10 Credits,无需价格筛选

**方案2: 动态权重排序 (Part 2 进阶版 - "模拟注意力")**

用户通过偏好滑块调整权重分配:
- 滑块向左(看重时间): 时间权重60%, 评分权重30%, 响应权重10%
- 滑块向右(看重评分): 时间权重0%, 评分权重60%, 响应权重40%
- 中间位置: 权重平衡分配

系统根据用户偏好动态调整各维度权重，实时重新排序导师列表。

---

#### 💡 推荐理由Chips (可解释性)

**生成规则:** 系统自动展示权重Top 2的匹配理由

**可能的理由标签:**
- 时间高度匹配 ⏰
- 高评分导师 ⭐
- 快速响应 🚀
- 同校导师 🏫
- 活跃导师 🔥

**展示效果示例:**
```
张三 - 98分匹配
[时间高度匹配 ⏰] [高评分导师 ⭐] [活跃导师 🔥]
```

每个导师最多显示3个推荐理由，让学生清楚了解为什么推荐这位导师。

---

#### 🔄 用户反馈与偏好学习

**即时反馈按钮** (Part 2 前端状态管理)

学生可点击三个按钮提供反馈:
- 🚫 不相关 - 隐藏该导师
- ⏰ 时间不合 - 提升时间权重，降低该导师排名
- 📚 教学风格不合 - 记录反馈，调整推荐

系统根据反馈立即调整:
- 隐藏或降低被反馈导师的排名
- 调整权重偏好
- 重新排序列表

**偏好滑块** (实时重排)

```
更看重时间 ←────●────→ 更看重评分
     0%      50%      100%
```

用户拖动滑块，系统即时重新计算匹配度并重排列表，无需刷新页面。

---

#### 📈 Part 3 进阶: 持久化与优化

**1. 用户偏好存储**

系统将用户的偏好向量存储到MongoDB:
- 各维度权重(从滑块和反馈学习)
- 历史负反馈记录(导师ID、反馈原因、时间戳)
- 最后更新时间

下次登录时自动加载用户偏好，提供个性化推荐。

**2. 基于反馈的权重自动调整**

系统统计用户的负反馈类型:
- 时间不合的反馈次数
- 教学风格不合的反馈次数

根据统计结果自动调整权重:
- 若用户多次反馈"时间不合"(>3次)，自动提升时间权重至50%
- 若用户多次反馈"教学风格不合"，提升评分和评价权重

**3. 冷启动优化**

新导师无评分时的处理策略:
- 给予中等初始评分(3.5星)
- 置信度较低(0.5)
- 随着获得真实评价，逐步过渡到实际评分
- 确保新导师有合理曝光机会

---

#### 🤖 AI的角色 (可选高级功能 5%)

**明确边界:** AI仅用于提升可读性，**不参与排序**

**功能1: 评价摘要生成**

调用OpenAI API (gpt-3.5-turbo) 一次性处理多条评价:
- 输入: 导师的所有学生评价
- 处理: AI提炼3个关键优点
- 输出示例: "讲解清晰、耐心细致、准备充分"

展示在导师详情页顶部，帮助学生快速了解导师特点。

**功能2: 标签提取**

从评价中自动提取高频标签:
- 统计所有评价中的标签出现次数
- 按频次排序，取Top 5
- 展示为标签云，标签后标注次数

展示效果: [耐心×12] [清晰×8] [准时×6] [负责×5] [细致×4]

---

#### 📊 评价系统优化

**匿名与撤回机制**

评价发布选项:
- **默认匿名** - 显示为"Student A"等化名
- **72小时内可撤回** - 发布后3天内可删除或修改
- **可选公开真名** - 提升评价可信度

撤回逻辑:
- 72小时内: 允许撤回，系统重新计算导师平均分
- 超过72小时: 无法撤回，提示"已超过撤回期限"

**降低表达压力:**
- 默认匿名发布，消除顾虑
- 72小时缓冲期，避免冲动评价
- 可选公开真名，灵活平衡隐私和可信度

---

#### 🎯 核心KPI

**Part 2 演示指标:**
- ✅ 动态权重开关ON/OFF对比效果
- ✅ 滑块调整后列表实时变化
- ✅ 推荐理由Chips正确展示Top 2权重

**Part 3 实际指标:**
- 📈 Top-3点击率提升 (>30%)
- 📈 预约转化率提升 (>20%)
- 📉 负反馈率下降 (<10%)
- 📊 新导师冷启动曝光达标 (首周≥5次)

---

#### 💼 交付物清单

**Part 2 (前端原型):**
- `TutorSearch.tsx` - 搜索筛选页面
- `ResultList.tsx` - 结果列表(含Chips和滑块)
- `rank.ts` - 排序算法文件(固定权重 + 动态权重各20行)
- `seed.json` - Mock数据(10-20名导师 + 若干评价)
- `README.md` - 算法说明 + 演示脚本

**Part 3 (完整应用):**
- 后端API: `/api/tutors/rank` (排序接口)
- 数据模型: `UserPreference` (偏好存储)
- 反馈记录: `Feedback` collection
- AI摘要: `/api/reviews/summary` (可选)

---

#### 🎬 演示脚本 (3步)

**Step 1: 基础匹配**
```
1. 学生输入: Python + 周三晚/周五下午
2. 系统展示Top 5导师 (消耗10 Credits)
3. 每个导师显示理由Chips: [时间高度匹配 ⏰] [高评分导师 ⭐]
```

**Step 2: 动态权重对比**
```
1. 打开"动态权重"开关
2. 拖动滑块: 更看重评分 →
3. 列表实时重排，高评分导师上升
4. 关闭开关，恢复固定权重排序
```

**Step 3: 反馈学习**
```
1. 点击"时间不合"按钮
2. 系统隐藏该导师
3. 后续搜索自动提升时间权重
4. (Part 3) 偏好持久化，下次登录生效
```

---

#### 🌟 给评审的一句话

> "我们采用Vibecoding理念：用**规则+动态权重**实现会话级个性化，用**规则理由**保证同源可解释；AI仅做摘要提升可读性，不接管排序。借助现代开发方式，我们把精力放在**产品逻辑与可解释性**，而非堆复杂后端与训练，在2周内交付可演示的智能匹配系统。"

---

**实现复杂度:** 低 (前端主导，后端轻量)
**演示效果:** 强 (可视化对比 + 即时反馈)
**可解释性:** 高 (每个推荐都可追溯)
**课程对齐:** 完美 (Part 2前端 → Part 3 MERN完整版)

---

**文档结束**

如需更新此文档,请联系项目负责人。
